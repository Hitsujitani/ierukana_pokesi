from bs4 import BeautifulSoup

# index.htmlの読み込みパスと書き込みパス
index_path = os.path.join(extract_path, "TeaHouse-1.0.0", "index.html")
output_path = "/mnt/data/index_pokesuri.html"

# HTMLを読み込んで、編集する
with open(index_path, "r", encoding="utf-8") as file:
    soup = BeautifulSoup(file, "html.parser")

# メインコンテンツの場所に新しいセクションを追加（既存内容に影響しないように下部に追加）
game_div = soup.new_tag("div", attrs={"id": "ierukana-game", "style": "padding: 50px;"})
game_div.append(BeautifulSoup("""
<h2>ポケスリいえるかな？</h2>
<p>ポケモンの名前を入力してください（例: フシギダネ）</p>
<input type="text" id="pokemonInput" placeholder="ポケモンの名前" style="padding: 5px; font-size: 16px;">
<button onclick="checkPokemon()" style="padding: 5px 10px; font-size: 16px;">送信</button>

<ul id="pokemonList" style="margin-top: 20px; font-weight: bold;">
  <li>1. ???</li>
  <li>2. ???</li>
  <li>3. ???</li>
</ul>

<script>
  const pokemonTable = ["フシギダネ", "フシギソウ", "フシギバナ"];
  let correctFlags = [false, false, false];

  function checkPokemon() {
    const input = document.getElementById("pokemonInput").value.trim();
    const listItems = document.querySelectorAll("#pokemonList li");
    let found = false;
    for (let i = 0; i < pokemonTable.length; i++) {
      if (!correctFlags[i] && input === pokemonTable[i]) {
        correctFlags[i] = true;
        listItems[i].textContent = (i + 1) + ". " + pokemonTable[i];
        found = true;
        break;
      }
    }
    if (!found) {
      alert("不正解です！");
    }
    document.getElementById("pokemonInput").value = "";
    document.getElementById("pokemonInput").focus();
  }
</script>
""", "html.parser"))

# body タグの末尾に game_div を追加
if soup.body:
    soup.body.append(game_div)

# 編集後のHTMLを保存
with open(output_path, "w", encoding="utf-8") as file:
    file.write(str(soup))

output_path
